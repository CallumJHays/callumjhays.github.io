<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="description" content="Callum Hays&#x27; Personal Website"/><meta property="og:description" content="Callum Hays&#x27; Personal Website"/><link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 100 100&quot;&gt;&lt;text y=&quot;.9em&quot; font-size=&quot;90&quot;&gt;
                  👨‍💻&lt;/text&gt;&lt;/svg&gt;" class="jsx-3307095283"/><title>How to use typing.Annotated in Python</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta property="og:title" content="How to use typing.Annotated in Python"/><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/54d6dc8dc0a79904.css" as="style"/><link rel="stylesheet" href="/_next/static/css/54d6dc8dc0a79904.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-61e8cdf1ee740872.js" defer=""></script><script src="/_next/static/chunks/framework-ff100329a956f214.js" defer=""></script><script src="/_next/static/chunks/main-9b8ff89d405671fe.js" defer=""></script><script src="/_next/static/chunks/pages/_app-aeb64186a3566a48.js" defer=""></script><script src="/_next/static/chunks/792-15dc1a615b86f572.js" defer=""></script><script src="/_next/static/chunks/409-3fad7cbcd3da07d7.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-df04873283dcb3ec.js" defer=""></script><script src="/_next/static/P6ddMybgWAKx2L_gs_nPy/_buildManifest.js" defer=""></script><script src="/_next/static/P6ddMybgWAKx2L_gs_nPy/_ssgManifest.js" defer=""></script><style id="__jsx-3307095283">h1{font-size:3rem;line-height:1;}h2{font-size:1.5rem;line-height:2rem;}*{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;}</style><style id="__jsx-666759429">.jsx-666759429 p{padding-top:.5rem;padding-bottom:.5rem;}</style></head><body><div id="__next" data-reactroot=""><div id="particle-background"><canvas style="width:100%;height:100%"></canvas></div><div class="min-h-screen flex flex-col justify-between"><div class="bg-white border-gray-500 mb-4 border-b"><div class="container max-w-3xl mx-auto grid grid-cols-4 divide-x divide-gray-500 text-center py-2"><h3 class="py-2 hover:underline hover:text-green-500 cursor-pointer">Home</h3><h3 class="py-2 hover:underline hover:text-green-500 cursor-pointer">Projects</h3><h3 class="py-2 hover:underline hover:text-green-500 cursor-pointer">Blog</h3><h3 class="py-2 hover:underline hover:text-green-500 cursor-pointer">Resume</h3></div></div><div class="flex flex-grow flex-col align-middle container mx-auto max-w-3xl p-4 justify-start"><img src="/_next/static/images/PythonLogo-925dc0a6a87afa2b4b00c33961f28388.png" class="jsx-666759429 object-contain h-56"/><div class="jsx-666759429 bg-white rounded p-4"><h1 class="jsx-666759429 pb-2">How to use typing.Annotated in Python</h1>Declerative runtime argument validation in Python with typing.Annotated<div class="jsx-666759429 text-gray-600 pt-3 flex flex-row justify-between text-sm"><div class="jsx-666759429">Published <!-- -->11 Jan 2020</div><div class="jsx-666759429">Edited <!-- -->07 Oct 2022</div><div class="jsx-666759429">Written by <span><span class=" cursor-pointer underline text-green-500">@CallumJHays</span></span></div></div><hr class="jsx-666759429 my-4"/><div><p>Recently I came across Python&#x27;s <span class="px-1 font-mono rounded gray bg-yellow-100">Annotated</span> type while <span><span class=" cursor-pointer underline text-green-500">migrating the <span class="px-1 font-mono rounded gray bg-yellow-100">typing_extensions</span> library to micropython</span></span>. After some brief googling there didn&#x27;t appear to be much info in the community on how to use it, so I decided to write this post.</p><p>The <span class="px-1 font-mono rounded gray bg-yellow-100">Annotated</span> type is the main focus of <span><span class=" cursor-pointer underline text-green-500">PEP 539</span></span> released with the standard <span class="px-1 font-mono rounded gray bg-yellow-100">typing</span> module in Python &gt;= 3.9 or with the <span class="px-1 font-mono rounded gray bg-yellow-100">typing_extensions</span> library in previous versions.</p><p>In its basic form, <span class="px-1 font-mono rounded gray bg-yellow-100">Annotated</span> lets you pack arbitrary python objects as a tuple in a <span class="px-1 font-mono rounded gray bg-yellow-100">__metadata__</span> attribute of a type object:</p><pre><div class="my-2 rounded overflow-hidden"><pre class="prism-code language-python" style="background-color:#2a2734;color:#9a86fd;padding:20px"><div class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">from</span><span class="token plain"> typing_extensions </span><span class="token keyword" style="color:#ffcc99">import</span><span class="token plain"> Annotated</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">SpecialInt </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Annotated</span><span class="token punctuation" style="color:#6c6783">[</span><span class="token builtin">int</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&quot;str Annotation&quot;</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">42</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&#x27;hello&#x27;</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&#x27;world&#x27;</span><span class="token punctuation" style="color:#6c6783">}</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">print</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">SpecialInt</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">__metadata__</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#6c6783"># (&#x27;str Annotation&#x27;, 42, {&#x27;hello&#x27;: &#x27;world&#x27;})</span><span class="token plain"></span></div></pre></div></pre><blockquote><p>PS: Usually <span class="px-1 font-mono rounded gray bg-yellow-100">__attr__</span>s are better not accessed directly; there&#x27;s
generally a stdlib function that should be used instead (such as
<span class="px-1 font-mono rounded gray bg-yellow-100">setattr()</span>). However I haven&#x27;t been able to find one for <span class="px-1 font-mono rounded gray bg-yellow-100">__metadata__</span> (¯<!-- -->\<!-- -->_<!-- -->(ツ)<!-- -->_<!-- -->/¯)</p></blockquote><p>One of the best use-cases of <span class="px-1 font-mono rounded gray bg-yellow-100">Annotated</span> I can think of is data validation for function inputs. Note there&#x27;s a bit of code required for the examples below to work.</p><p>You can get the <span><span class=" cursor-pointer underline text-green-500">full working code here</span></span>.</p><pre><div class="my-2 rounded overflow-hidden"><pre class="prism-code language-python" style="background-color:#2a2734;color:#9a86fd;padding:20px"><div class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">from</span><span class="token plain"> typing_extensions </span><span class="token keyword" style="color:#ffcc99">import</span><span class="token plain"> Annotated </span><span class="token keyword" style="color:#ffcc99">as</span><span class="token plain"> An</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">from</span><span class="token plain"> runtype_validation </span><span class="token keyword" style="color:#ffcc99">import</span><span class="token plain"> validate</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> InRange</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#6c6783">@validate</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">def</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">test_fn</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> An</span><span class="token punctuation" style="color:#6c6783">[</span><span class="token builtin">int</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> InRange</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">0</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">100</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">            b</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> An</span><span class="token punctuation" style="color:#6c6783">[</span><span class="token builtin">float</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> InRange</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">0</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">pass</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">test_fn</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">50</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0.5</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token comment" style="color:#6c6783"># works</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">test_fn</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">0.5</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0.5</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#6c6783"># TypeError: Expected a to have type &lt;class &#x27;int&#x27;&gt; but got &lt;class &#x27;float&#x27;&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">test_fn</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">b</span><span class="token operator" style="color:#e09142">=</span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> a</span><span class="token operator" style="color:#e09142">=</span><span class="token number" style="color:#e09142">50</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#6c6783"># AssertionError: Argument b=2 not in range [0, 1)</span><span class="token plain"></span></div></pre></div></pre><p>This works for class methods as well:</p><pre><div class="my-2 rounded overflow-hidden"><pre class="prism-code language-python" style="background-color:#2a2734;color:#9a86fd;padding:20px"><div class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">Test</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#6c6783">@validate</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">def</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">__init__</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">                 a</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> An</span><span class="token punctuation" style="color:#6c6783">[</span><span class="token builtin">int</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> InRange</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">0</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">100</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">                 b</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> An</span><span class="token punctuation" style="color:#6c6783">[</span><span class="token builtin">float</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> InRange</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">0</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">pass</span><span class="token plain"></span></div></pre></div></pre><p>One can also extend it as a class decorator, applying the <span class="px-1 font-mono rounded gray bg-yellow-100">@validate</span> each method of the class:</p><pre><div class="my-2 rounded overflow-hidden"><pre class="prism-code language-python" style="background-color:#2a2734;color:#9a86fd;padding:20px"><div class="token-line" style="color:#9a86fd"><span class="token comment" style="color:#6c6783"># equivalent to previous example</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#6c6783">@validate</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">Test</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">def</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">__init__</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">etc</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">.</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain"></span></div></pre></div></pre><p><span class="px-1 font-mono rounded gray bg-yellow-100">typing.Annotated</span> is a very powerful and flexible tool when properly understood. If you have any other ideas for how to use <span class="px-1 font-mono rounded gray bg-yellow-100">Annotated</span>, I&#x27;d love to hear about it in the comments below!</p></div><hr class="jsx-666759429 mb-12 mt-4"/><div id="disqus_thread"></div></div></div><div class="bg-white border-gray-500 mt-4 border-t"><div class="container max-w-3xl mx-auto grid grid-cols-4 divide-x divide-gray-500 text-center py-2"><h3 class="py-2 hover:underline hover:text-green-500 cursor-pointer">Home</h3><h3 class="py-2 hover:underline hover:text-green-500 cursor-pointer">Projects</h3><h3 class="py-2 hover:underline hover:text-green-500 cursor-pointer">Blog</h3><h3 class="py-2 hover:underline hover:text-green-500 cursor-pointer">Resume</h3></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"\"use strict\";\n\nvar _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Recently I came across Python's \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Annotated\"), \" type while \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/micropython/micropython-lib/issues/190#issuecomment-751616492\"\n  }, \"migrating the \", mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"typing_extensions\"), \" library to micropython\"), \". After some brief googling there didn't appear to be much info in the community on how to use it, so I decided to write this post.\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Annotated\"), \" type is the main focus of \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.python.org/dev/peps/pep-0593/\"\n  }, \"PEP 539\"), \" released with the standard \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"typing\"), \" module in Python \u003e= 3.9 or with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"typing_extensions\"), \" library in previous versions.\"), mdx(\"p\", null, \"In its basic form, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Annotated\"), \" lets you pack arbitrary python objects as a tuple in a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"__metadata__\"), \" attribute of a type object:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"from typing_extensions import Annotated\\n\\nSpecialInt = Annotated[int, \\\"str Annotation\\\", 42, {'hello': 'world'}]\\n\\nprint(SpecialInt.__metadata__)\\n# ('str Annotation', 42, {'hello': 'world'})\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"PS: Usually \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"__attr__\"), \"s are better not accessed directly; there's\\ngenerally a stdlib function that should be used instead (such as\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setattr()\"), \"). However I haven't been able to find one for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"__metadata__\"), \" (\\xAF\", \"\\\\\", \"_\", \"(\\u30C4)\", \"_\", \"/\\xAF)\")), mdx(\"p\", null, \"One of the best use-cases of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Annotated\"), \" I can think of is data validation for function inputs. Note there's a bit of code required for the examples below to work.\"), mdx(\"p\", null, \"You can get the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://gist.github.com/CallumJHays/e4ad98925894a8e1cd7ef57e90fe2807/\"\n  }, \"full working code here\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"from typing_extensions import Annotated as An\\nfrom runtype_validation import validate, InRange\\n\\n@validate\\ndef test_fn(a: An[int, InRange(0, 100)],\\n            b: An[float, InRange(0, 1)]):\\n    pass\\n\\ntest_fn(50, 0.5) # works\\n\\ntest_fn(0.5, 0.5)\\n# TypeError: Expected a to have type \u003cclass 'int'\u003e but got \u003cclass 'float'\u003e\\n\\ntest_fn(b=2, a=50)\\n# AssertionError: Argument b=2 not in range [0, 1)\\n\")), mdx(\"p\", null, \"This works for class methods as well:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"class Test:\\n    @validate\\n    def __init__(self,\\n                 a: An[int, InRange(0, 100)],\\n                 b: An[float, InRange(0, 1)]):\\n        pass\\n\")), mdx(\"p\", null, \"One can also extend it as a class decorator, applying the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@validate\"), \" each method of the class:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"# equivalent to previous example\\n\\n@validate\\nclass Test:\\n    def __init__(...etc): ...\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"typing.Annotated\"), \" is a very powerful and flexible tool when properly understood. If you have any other ideas for how to use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Annotated\"), \", I'd love to hear about it in the comments below!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eRecently I came across Python\u0026#x27;s \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003eAnnotated\u003c/span\u003e type while \u003cspan\u003e\u003cspan class=\" cursor-pointer underline text-green-500\"\u003emigrating the \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003etyping_extensions\u003c/span\u003e library to micropython\u003c/span\u003e\u003c/span\u003e. After some brief googling there didn\u0026#x27;t appear to be much info in the community on how to use it, so I decided to write this post.\u003c/p\u003e\u003cp\u003eThe \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003eAnnotated\u003c/span\u003e type is the main focus of \u003cspan\u003e\u003cspan class=\" cursor-pointer underline text-green-500\"\u003ePEP 539\u003c/span\u003e\u003c/span\u003e released with the standard \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003etyping\u003c/span\u003e module in Python \u0026gt;= 3.9 or with the \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003etyping_extensions\u003c/span\u003e library in previous versions.\u003c/p\u003e\u003cp\u003eIn its basic form, \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003eAnnotated\u003c/span\u003e lets you pack arbitrary python objects as a tuple in a \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003e__metadata__\u003c/span\u003e attribute of a type object:\u003c/p\u003e\u003cpre\u003e\u003cdiv class=\"my-2 rounded overflow-hidden\"\u003e\u003cpre class=\"prism-code language-python\" style=\"background-color:#2a2734;color:#9a86fd;padding:20px\"\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003efrom\u003c/span\u003e\u003cspan class=\"token plain\"\u003e typing_extensions \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003eimport\u003c/span\u003e\u003cspan class=\"token plain\"\u003e Annotated\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003eSpecialInt \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#e09142\"\u003e=\u003c/span\u003e\u003cspan class=\"token plain\"\u003e Annotated\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token string\" style=\"color:#ffcc99\"\u003e\u0026quot;str Annotation\u0026quot;\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e42\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e{\u003c/span\u003e\u003cspan class=\"token string\" style=\"color:#ffcc99\"\u003e\u0026#x27;hello\u0026#x27;\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token string\" style=\"color:#ffcc99\"\u003e\u0026#x27;world\u0026#x27;\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e]\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token plain\"\u003eSpecialInt\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e.\u003c/span\u003e\u003cspan class=\"token plain\"\u003e__metadata__\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token comment\" style=\"color:#6c6783\"\u003e# (\u0026#x27;str Annotation\u0026#x27;, 42, {\u0026#x27;hello\u0026#x27;: \u0026#x27;world\u0026#x27;})\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/pre\u003e\u003cblockquote\u003e\u003cp\u003ePS: Usually \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003e__attr__\u003c/span\u003es are better not accessed directly; there\u0026#x27;s\ngenerally a stdlib function that should be used instead (such as\n\u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003esetattr()\u003c/span\u003e). However I haven\u0026#x27;t been able to find one for \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003e__metadata__\u003c/span\u003e (¯\u003c!-- --\u003e\\\u003c!-- --\u003e_\u003c!-- --\u003e(ツ)\u003c!-- --\u003e_\u003c!-- --\u003e/¯)\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003eOne of the best use-cases of \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003eAnnotated\u003c/span\u003e I can think of is data validation for function inputs. Note there\u0026#x27;s a bit of code required for the examples below to work.\u003c/p\u003e\u003cp\u003eYou can get the \u003cspan\u003e\u003cspan class=\" cursor-pointer underline text-green-500\"\u003efull working code here\u003c/span\u003e\u003c/span\u003e.\u003c/p\u003e\u003cpre\u003e\u003cdiv class=\"my-2 rounded overflow-hidden\"\u003e\u003cpre class=\"prism-code language-python\" style=\"background-color:#2a2734;color:#9a86fd;padding:20px\"\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003efrom\u003c/span\u003e\u003cspan class=\"token plain\"\u003e typing_extensions \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003eimport\u003c/span\u003e\u003cspan class=\"token plain\"\u003e Annotated \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003eas\u003c/span\u003e\u003cspan class=\"token plain\"\u003e An\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003efrom\u003c/span\u003e\u003cspan class=\"token plain\"\u003e runtype_validation \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003eimport\u003c/span\u003e\u003cspan class=\"token plain\"\u003e validate\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e InRange\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token decorator annotation punctuation\" style=\"color:#6c6783\"\u003e@validate\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003edef\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token function\" style=\"color:#9a86fd\"\u003etest_fn\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token plain\"\u003ea\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e An\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e InRange\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e            b\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e An\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003efloat\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e InRange\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e    \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003epass\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003etest_fn\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e50\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e0.5\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token comment\" style=\"color:#6c6783\"\u003e# works\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003etest_fn\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e0.5\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e0.5\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token comment\" style=\"color:#6c6783\"\u003e# TypeError: Expected a to have type \u0026lt;class \u0026#x27;int\u0026#x27;\u0026gt; but got \u0026lt;class \u0026#x27;float\u0026#x27;\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003etest_fn\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token plain\"\u003eb\u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#e09142\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e a\u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#e09142\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e50\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token comment\" style=\"color:#6c6783\"\u003e# AssertionError: Argument b=2 not in range [0, 1)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/pre\u003e\u003cp\u003eThis works for class methods as well:\u003c/p\u003e\u003cpre\u003e\u003cdiv class=\"my-2 rounded overflow-hidden\"\u003e\u003cpre class=\"prism-code language-python\" style=\"background-color:#2a2734;color:#9a86fd;padding:20px\"\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003eclass\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token class-name\"\u003eTest\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e    \u003c/span\u003e\u003cspan class=\"token decorator annotation punctuation\" style=\"color:#6c6783\"\u003e@validate\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e    \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003edef\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token function\" style=\"color:#9a86fd\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token plain\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e                 a\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e An\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e InRange\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e                 b\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e An\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003efloat\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e InRange\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e        \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003epass\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/pre\u003e\u003cp\u003eOne can also extend it as a class decorator, applying the \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003e@validate\u003c/span\u003e each method of the class:\u003c/p\u003e\u003cpre\u003e\u003cdiv class=\"my-2 rounded overflow-hidden\"\u003e\u003cpre class=\"prism-code language-python\" style=\"background-color:#2a2734;color:#9a86fd;padding:20px\"\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token comment\" style=\"color:#6c6783\"\u003e# equivalent to previous example\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token decorator annotation punctuation\" style=\"color:#6c6783\"\u003e@validate\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003eclass\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token class-name\"\u003eTest\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e    \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003edef\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token function\" style=\"color:#9a86fd\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e.\u003c/span\u003e\u003cspan class=\"token plain\"\u003eetc\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e.\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/pre\u003e\u003cp\u003e\u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003etyping.Annotated\u003c/span\u003e is a very powerful and flexible tool when properly understood. If you have any other ideas for how to use \u003cspan class=\"px-1 font-mono rounded gray bg-yellow-100\"\u003eAnnotated\u003c/span\u003e, I\u0026#x27;d love to hear about it in the comments below!\u003c/p\u003e","scope":{"title":"How to use typing.Annotated in Python","subtitle":"Declerative runtime argument validation in Python with typing.Annotated","preview":"PythonLogo.png","published":"11 Jan 2020","edited":"07 Oct 2022"}},"frontMatter":{"title":"How to use typing.Annotated in Python","subtitle":"Declerative runtime argument validation in Python with typing.Annotated","preview":"PythonLogo.png","published":"11 Jan 2020","edited":"07 Oct 2022"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"python_annotated_type_04012020"},"buildId":"P6ddMybgWAKx2L_gs_nPy","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>